(this.webpackJsonpreminder=this.webpackJsonpreminder||[]).push([[0],{260:function(e,t,a){e.exports=a.p+"static/media/balance.6040daaf.png"},261:function(e,t,a){e.exports=a.p+"static/media/stake.70483a2e.png"},262:function(e,t,a){e.exports=a.p+"static/media/login.9a76e74e.svg"},292:function(e,t,a){e.exports=a(440)},297:function(e,t,a){},440:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(118),l=a.n(c),i=(a(297),a(4)),o=a.n(i),s=a(11),u=a(83),m=a(22),d=a(6),p=r.a.createContext(),f=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(d.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(!1),s=Object(d.a)(o,2),u=s[0],m=s[1],f=Object(n.useState)(!1),v=Object(d.a)(f,2),b=v[0],E=v[1],g=Object(n.useState)(!1),h=Object(d.a)(g,2),y=h[0],O=h[1],x=Object(n.useState)(!1),k=Object(d.a)(x,2),S=k[0],N=k[1],j=Object(n.useState)(!1),C=Object(d.a)(j,2),F=C[0],w=C[1],I=Object(n.useState)(""),A=Object(d.a)(I,2),M=A[0],T=A[1],B=Object(n.useState)(""),D=Object(d.a)(B,2),P=D[0],_=D[1],z=Object(n.useState)(""),U=Object(d.a)(z,2),H=U[0],L=U[1],R=Object(n.useState)(""),G=Object(d.a)(R,2),W=G[0],Y=G[1],V=Object(n.useState)({token:void 0,player:void 0,otherPrices:void 0,pendingTrades:void 0,requestedTrades:void 0,allPendingTransactions:void 0,totalStake:void 0}),q=Object(d.a)(V,2),J=q[0],X=q[1];return r.a.createElement(p.Provider,{value:{isGameOn:l,setIsGameOn:i,gameData:J,setGameData:X,clearGameData:function(){X({token:void 0,player:void 0,otherPrices:void 0,pendingTrades:void 0,requestedTrades:void 0,allPendingTransactions:void 0,totalStake:void 0})},modalContent:M,setModalContent:T,openConfirmModal:function(){m(!0)},closeConfirmModal:function(){m(!1)},confirmModalContent:P,setConfirmModalContent:_,isConfirmModalOpen:u,openStakeModal:function(){E(!0)},closeStakeModal:function(){E(!1)},isStakeModalOpen:b,openTradeModal:function(){O(!0)},closeTradeModal:function(){O(!1)},tradeModalContent:H,setTradeModalContent:L,isTradeModalOpen:y,openCancelOrderModal:function(){N(!0)},closeCancelOrderModal:function(){N(!1)},cancelOrderModalContent:W,setCancelOrderModalContent:Y,isCancelOrderModalOpen:S,openCreateOrderModal:function(){w(!0)},closeCreateOrderModal:function(){w(!1)},isCreateOrderModalOpen:F}},t)},v=function(){return Object(n.useContext)(p)};function b(){var e=v(),t=e.gameData,a=e.clearGameData,n=Object(m.f)();return r.a.createElement("nav",null,t.player?r.a.createElement("button",{className:"nav-btn",onClick:function(){a(),localStorage.setItem("auth-token",""),localStorage.setItem("playerId",""),window.location.reload(!1)}},"Log out"):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"nav-btn",onClick:function(){return n.push("/login")}},"Log in")))}var E=function(){return r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-center"},r.a.createElement("div",{className:"nav-header"},r.a.createElement("h2",{className:"nav-heading"},r.a.createElement("a",{href:"/"},"SharedManufacturing"))),r.a.createElement("div",{className:"nav-links-container"},r.a.createElement("ul",null,r.a.createElement(b,null)))))},g=a(13),h=[{id:1,url:"/",text:"Home",icon:r.a.createElement(g.e,null)},{id:2,url:"/trade",text:"Trade",icon:r.a.createElement(g.j,null)},{id:3,url:"/blockchain",text:"Blockchain",icon:r.a.createElement(g.d,null)}],y=a(20),O=a.n(y),x=function(){var e=v(),t=e.gameData,a=e.isCreateOrderModalOpen,c=e.closeCreateOrderModal,l=Object(n.useState)(),i=Object(d.a)(l,2),u=i[0],m=i[1],p=Object(n.useState)(!1),f=Object(d.a)(p,2),b=f[0],E=f[1],h=Object(n.useState)(""),y=Object(d.a)(h,2),x=y[0],k=y[1],S=function(){var e=Object(s.a)(o.a.mark((function e(){var a,n,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!==u&&""!==u){e.next=6;break}k("You must enter a value"),E(!0),e.next=38;break;case 6:if(!(isNaN(u)||u<0)){e.next=11;break}k("Input must be a non-negative number"),E(!0),e.next=38;break;case 11:if(i=u,!((Math.floor(i).toString()===i?0:i.toString().split(".")[1].length||0)>1)){e.next=16;break}k("Input value can have at most one decimal place"),E(!0),e.next=38;break;case 16:if(!(parseFloat(u)>3e3)){e.next=21;break}k("Maximum price in this game is 3000"),E(!0),e.next=38;break;case 21:if(0!==t.player.amountOfAvailableService){e.next=26;break}k("Amount of available services is too low"),E(!0),e.next=38;break;case 26:return a=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),r={amountOfService:1,price:u},l={headers:{Authorization:"Bearer "+a}},e.next=32,O.a.post("/player/createOrder/".concat(n),r,l);case 32:e.sent,c(),k(""),E(!1),m(),document.getElementById("priceInput").value="";case 38:e.next=43;break;case 40:e.prev=40,e.t0=e.catch(0),void 0!==e.t0.response&&"Trade already exists"===e.t0.response.data.message&&(k("Trade with this person already exists"),E(!0));case 43:case"end":return e.stop()}var i}),e,null,[[0,40]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"".concat(a?"modal-confirm-overlay show-modal-confirm":"modal-confirm-overlay")},r.a.createElement("div",{className:"modal-confirm-container"},r.a.createElement("h3",null,"Set Price"),r.a.createElement("div",{className:"modal-input-group"},r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("div",{className:"modal-input-group-container"},r.a.createElement("input",{type:"text",name:"price",id:"priceInput",placeholder:"Enter price",onChange:function(e){return m(e.target.value)}}))),r.a.createElement("div",{className:"".concat(b?"modal-input-alert show-modal-input-alert":"modal-input-alert")},x),r.a.createElement("button",{className:"close-modal-btn",onClick:function(){c(),k(""),E(!1),m(),document.getElementById("priceInput").value=""}},r.a.createElement(g.i,null)),r.a.createElement("button",{className:"confirm-modal-btn",onClick:S},"Confirm")))},k=function(){var e=v(),t=e.gameData,a=e.openCreateOrderModal,c=Object(n.useState)(!1),l=Object(d.a)(c,2),i=l[0],m=l[1],p=Object(n.useState)(0),f=Object(d.a)(p,2),b=f[0],E=f[1],y=function(){var e=Object(s.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.orders.filter((function(e){return e.provider===t.player._id})),m(!Array.isArray(a)||!a.length);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){y();var e=Math.floor(t.player.stake/t.totalStake*100);E(e)}),[t]),r.a.createElement("div",null,r.a.createElement("div",{className:"sidebar"},r.a.createElement("ul",{className:"sidebar-links"},h.map((function(e){var t=e.id,a=e.url,n=e.text,c=e.icon;return r.a.createElement("li",{key:t},r.a.createElement(u.b,{to:a},c,n))})))),r.a.createElement("div",{className:"stats-sidebar"},r.a.createElement("h3",null,"Stats"),r.a.createElement("div",{className:"stats-sidebar-values"},r.a.createElement("div",{className:"stats-sidebar-values-stat"},r.a.createElement(g.g,{style:{color:"green",fontSize:"22px"}}),r.a.createElement("h4",null,t.player.balance)),r.a.createElement("div",{className:"stats-sidebar-values-stat"},r.a.createElement(g.c,{style:{color:"#38aaff",fontSize:"22px"}}),r.a.createElement("h4",{style:1===t.player.amountOfAvailableService?{color:"forestgreen",fontSize:"18px"}:{color:"darkred",fontSize:"18px"}},1===t.player.amountOfAvailableService?"AVAILABLE":"UNAVAILABLE")),r.a.createElement("div",{className:"stats-sidebar-values-stat"},r.a.createElement(g.d,{style:{color:"#ffba72",fontSize:"22px"}}),r.a.createElement("h4",null,t.player.stake," (",b,"%)")))),r.a.createElement("div",{className:"create-order-container"},1===t.player.amountOfAvailableService&&i?r.a.createElement("button",{className:"create-order-btn",onClick:a},"Set Price"):""),r.a.createElement(x,null))},S=function(){var e=v().modalContent;return r.a.createElement("div",{className:"modal-overlay"},r.a.createElement("div",{className:"modal-container"},r.a.createElement("h2",null,e)))},N=a(260),j=a.n(N),C=a(261),F=a.n(C),w=function(){var e=v().gameData,t=Object(n.useState)(0),a=Object(d.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(0),o=Object(d.a)(i,2),s=o[0],u=o[1];function m(e){var t=new Date(1e3*Math.round(e/1e3));return 0===t.getUTCMinutes()?t.getUTCSeconds()+"s":t.getUTCMinutes()+"min "+t.getUTCSeconds()+"s"}return Object(n.useEffect)((function(){if(0===e.player.amountOfAvailableService){var t=Math.floor((Date.now()-e.player.serviceTimestamp)/e.player.timeForService*100);l(t)}else l(100);var a=Math.floor(e.player.stake/e.totalStake*100);u(a)}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"stats-grid"},r.a.createElement("div",{className:"grid-item-stats"},r.a.createElement("div",{className:"stats-image"},r.a.createElement("img",{src:j.a,alt:"balance"})),r.a.createElement("div",{className:"stats-value"},r.a.createElement("p",null,e.player.balance))),r.a.createElement("div",{className:"grid-item-stats"},r.a.createElement("div",{className:"time-value"},r.a.createElement("h2",null,"Service ",e.player.typeOfService)),r.a.createElement("div",{className:"".concat(1===e.player.amountOfAvailableService?"time-value-available":"time-value-unavailable")},r.a.createElement("h2",null,1===e.player.amountOfAvailableService?"Available":"Unavailable")),r.a.createElement("div",{className:"time-container"},r.a.createElement("div",{className:"bar-container"},r.a.createElement("div",{className:"bar-filler",style:{width:"".concat(c,"%")}},r.a.createElement("span",{className:"bar-label"},"".concat(c,"%"))),r.a.createElement("div",{className:"bottom"},r.a.createElement("p",null,"Time for service = ",m(e.player.timeForService)),r.a.createElement("i",null))))),r.a.createElement("div",{className:"grid-item-stats"},r.a.createElement("div",{className:"stake-image"},r.a.createElement("img",{src:F.a,alt:"stake"})),r.a.createElement("div",{className:"stake-value"},r.a.createElement("p",null,e.player.stake)),r.a.createElement("div",{className:"stake-value"},r.a.createElement("p",null,"(",s,"%)"))),r.a.createElement("div",{className:"grid-item-stats"},r.a.createElement("div",{className:"upgrade-value"},r.a.createElement("h2",null,"Upgrade")),r.a.createElement("div",{className:"upgrade-container"},r.a.createElement("div",{className:"".concat(e.player.amountOfOtherService1>0?"upgrade-container-green":"upgrade-container-red")},r.a.createElement("p",null,"".concat(e.player.amountOfOtherService1)," \xd7 ","".concat(e.player.typeOfOtherService1))),r.a.createElement("div",null,r.a.createElement("p",null,"+")),r.a.createElement("div",{className:"".concat(e.player.amountOfOtherService2>0?"upgrade-container-green":"upgrade-container-red")},r.a.createElement("p",null,"".concat(e.player.amountOfOtherService2)," \xd7 ","".concat(e.player.typeOfOtherService2)))),r.a.createElement("div",{className:"upgrade-container"},r.a.createElement("div",{className:"upgrade-container-formula"},r.a.createElement("p",null,"".concat(e.player.typeOfOtherService1)," + ","".concat(e.player.typeOfOtherService2)," = \u21e9 ",m(e.player.timeForService-e.player.nextTimeForService)))))))},I=function(){var e=v(),t=e.gameData,a=e.isStakeModalOpen,c=e.closeStakeModal,l=Object(n.useState)(0),i=Object(d.a)(l,2),u=i[0],m=i[1],p=Object(n.useState)(0),f=Object(d.a)(p,2),b=f[0],E=f[1],h=Object(n.useState)(),y=Object(d.a)(h,2),x=y[0],k=y[1],S=Object(n.useState)(!1),N=Object(d.a)(S,2),j=N[0],C=N[1],F=Object(n.useState)(""),w=Object(d.a)(F,2),I=w[0],A=w[1],M=function(){var e=Object(s.a)(o.a.mark((function e(){var a,n,r,l,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!==x&&""!==x){e.next=6;break}A("You must enter a value"),C(!0),e.next=42;break;case 6:if(!(isNaN(x)||x<0)){e.next=11;break}A("Input must be a positive number"),C(!0),e.next=42;break;case 11:if(o=x,!((Math.floor(o).toString()===o?0:o.toString().split(".")[1].length||0)>1)){e.next=16;break}A("Input value can have at most one decimal place"),C(!0),e.next=42;break;case 16:if(!(b+parseFloat(x)>t.player.balance)){e.next=21;break}A("Price and TxFee is higher than balance"),C(!0),e.next=42;break;case 21:if(a=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),!(b>0)){e.next=29;break}return r={stake:b.toString(),txFee:x},l={headers:{Authorization:"Bearer "+a}},e.next=28,O.a.post("/player/stake/".concat(n),r,l);case 28:e.sent;case 29:if(!(b<0)){e.next=36;break}return i={unstake:(-b).toString(),txFee:x},s={headers:{Authorization:"Bearer "+a}},e.next=35,O.a.post("/player/unstake/".concat(n),i,s);case 35:e.sent;case 36:E(0),c(),A(""),C(!1),k(),document.getElementById("inputHolder").value="";case 42:e.next=47;break;case 44:e.prev=44,e.t0=e.catch(0),console.log(e.t0);case 47:case"end":return e.stop()}var o}),e,null,[[0,44]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=Math.floor(t.player.stake/t.totalStake*100);m(e)}),[t]),r.a.createElement("div",{className:"".concat(a?"modal-confirm-overlay show-modal-confirm":"modal-confirm-overlay")},r.a.createElement("div",{className:"modal-confirm-container"},r.a.createElement("h3",null,"Stake: ",t.player.stake," (",u,"%)"),r.a.createElement("div",{className:"stake-modal-container"},r.a.createElement("div",null,r.a.createElement("button",{className:"decrease-stake-btn",onClick:function(){b>=-(t.player.stake-1)&&E(b-1)}},r.a.createElement(g.f,null))),r.a.createElement("div",null,r.a.createElement("h1",null,b)),r.a.createElement("div",null,r.a.createElement("button",{className:"increase-stake-btn",onClick:function(){b<=t.player.balance-1&&E(b+1)}},r.a.createElement(g.h,null)))),r.a.createElement("div",{className:"modal-input-group"},r.a.createElement("label",{htmlFor:"txFee"},"Tx Fee"),r.a.createElement("div",{className:"modal-input-group-container"},r.a.createElement("input",{type:"text",name:"txFee",id:"inputHolder",placeholder:"Enter tx fee",onChange:function(e){return k(e.target.value)}}))),r.a.createElement("div",{className:"".concat(j?"modal-input-alert show-modal-input-alert":"modal-input-alert")},I),r.a.createElement("button",{className:"close-modal-btn",onClick:function(){E(0),c(),A(""),C(!1),k(),document.getElementById("inputHolder").value=""}},r.a.createElement(g.i,null)),r.a.createElement("button",{className:"confirm-modal-btn",onClick:M},"Confirm")))},A=function(){var e=v(),t=e.gameData,a=e.isGameOn,c=e.setModalContent;return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),""!==t&&""!==n?a||c("Wait for the admin to start the game!"):c("Please log in!");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",null,r.a.createElement("div",null,t.player?r.a.createElement("div",null,a?r.a.createElement("div",null,r.a.createElement("div",{className:"home-grid"},r.a.createElement("div",{className:"item-sidebar"},r.a.createElement(k,null)),r.a.createElement("div",{className:"item-content"},r.a.createElement(w,null))),r.a.createElement(I,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null))))},M=a(262),T=a.n(M);function B(){var e=Object(n.useState)(),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(),i=Object(d.a)(l,2),u=i[0],p=i[1],f=Object(n.useState)(!1),v=Object(d.a)(f,2),b=v[0],E=v[1],g=Object(m.f)(),h=function(){var e=Object(s.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),n={playerName:a,password:u},e.next=5,O.a.post("/player/login",n);case 5:r=e.sent,localStorage.setItem("auth-token",r.data.token),localStorage.setItem("playerId",r.data.id),g.push("/"),g.go(0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),void 0!==e.t0.response&&"Auth failed"===e.t0.response.data.message&&E(!0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-App"},r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login-base-container"},r.a.createElement("h3",null,"Login"),r.a.createElement("div",{className:"login-content"},r.a.createElement("div",{className:"login-image"},r.a.createElement("img",{src:T.a,alt:"login"})),r.a.createElement("div",{className:"login-form"},r.a.createElement("div",{className:"login-form-group"},r.a.createElement("label",{htmlFor:"playerName"},"Player name"),r.a.createElement("input",{type:"text",name:"playerName",placeholder:"Enter name",onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",{className:"login-form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter password",onChange:function(e){return p(e.target.value)}})))),r.a.createElement("div",{className:"".concat(b?"login-alert show-alert":"login-alert")},"The name or password is incorrect!"),r.a.createElement("div",{className:"login-footer"},r.a.createElement("button",{type:"button",className:"login-btn",onClick:h},"Log in"))))))}var D=a(38),P=a(263),_=function(e){var t=e.dataArray,a=e.modifiedData,n=v(),c=n.gameData,l=n.openTradeModal,i=n.setTradeModalContent,o=n.openCancelOrderModal,s=n.setCancelOrderModalContent;return r.a.createElement(P.a,{data:a,onClick:function(e){return function(e){if(e.typeOfService!==c.player.typeOfService){var a=t.filter((function(t){return t._id===e._id}));Array.isArray(a)&&a.length&&(i(a[0]),l())}else if(e.playerName===c.player.playerName){var n=t.filter((function(t){return t._id===e._id}));Array.isArray(n)&&n.length&&(s(n[0]),o())}}(e.data)},onMouseEnter:function(e,t){return function(e,t){(e.typeOfService!==c.player.typeOfService||e.playerName===c.player.playerName)&&(t.target.style.cursor="pointer")}(e.data,t)},keys:["price"],indexBy:"playerName",margin:{top:10,right:20,bottom:50,left:70},padding:.25,valueScale:{type:"symlog"},theme:{fontSize:14,fontFamily:"Roboto, sans-serif",axis:{legend:{text:{fontSize:"16px",fontWeight:"bold",fontFamily:"Roboto, sans-serif"}}}},colors:function(e){return e.data.color},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"PRICE",legendPosition:"middle",legendOffset:-50,tickValues:3},tooltip:function(e){var a=e.data,n=e.id;return r.a.createElement("strong",null,n," - ",a.playerName,": ",function(e){var a=t.filter((function(t){return t._id===e._id}));if(Array.isArray(a)&&a.length)return a[0].price.toString()}(a))},label:function(e){return function(e){var a=t.filter((function(t){return t._id===e._id}));if(Array.isArray(a)&&a.length)return a[0].price.toString()}(e.data)},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:"white",animate:!1,motionStiffness:90,motionDamping:15})},z=function(){var e=v().gameData,t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),u=Object(d.a)(i,2),m=u[0],p=u[1],f=Object(n.useState)([]),b=Object(d.a)(f,2),E=b[0],g=b[1],h=Object(n.useState)([]),y=Object(d.a)(h,2),O=y[0],x=y[1],k=Object(n.useState)([]),S=Object(d.a)(k,2),N=S[0],j=S[1],C=Object(n.useState)([]),F=Object(d.a)(C,2),w=F[0],I=F[1];return Object(n.useEffect)((function(){(function(){var t=Object(s.a)(o.a.mark((function t(){var a,n,r,c,i,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.orders.filter((function(t){return t.typeOfService===e.player.typeOfOtherService1}));case 2:return a=t.sent,t.next=5,e.orders.filter((function(t){return t.typeOfService===e.player.typeOfOtherService2}));case 5:return n=t.sent,t.next=8,e.orders.filter((function(t){return t.typeOfService===e.player.typeOfService}));case 8:return r=t.sent,t.next=11,a.forEach((function(e){e.price=parseFloat(e.price),e.color="#1E90FF"}));case 11:return t.next=13,n.forEach((function(e){e.price=parseFloat(e.price),e.color="green"}));case 13:return t.next=15,r.forEach((function(t){t.price=parseFloat(t.price),t.playerName===e.player.playerName?t.color="#FFD700":t.color="#FF8C00"}));case 15:return t.next=17,a.sort((function(e,t){return parseInt(e.price)-parseInt(t.price)}));case 17:return t.next=19,n.sort((function(e,t){return parseInt(e.price)-parseInt(t.price)}));case 19:return t.next=21,r.sort((function(e,t){return parseInt(e.price)-parseInt(t.price)}));case 21:return l(a),p(n),g(r),t.next=26,a.map((function(e){return e.price<1?Object(D.a)(Object(D.a)({},e),{},{price:.9}):Object(D.a)({},e)}));case 26:return c=t.sent,t.next=29,n.map((function(e){return e.price<1?Object(D.a)(Object(D.a)({},e),{},{price:.9}):Object(D.a)({},e)}));case 29:return i=t.sent,t.next=32,r.map((function(e){return e.price<1?Object(D.a)(Object(D.a)({},e),{},{price:.9}):Object(D.a)({},e)}));case 32:s=t.sent,x(c),j(i),I(s);case 36:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"trades-container"},r.a.createElement("div",{className:"other-services-trade-container"},r.a.createElement("div",{className:"chart-container"},r.a.createElement("div",{className:"chart-container-text"},r.a.createElement("h3",null,"Service ","".concat(e.player.typeOfOtherService1))),r.a.createElement("div",{className:"chart-container-chart"},r.a.createElement(_,{dataArray:c,modifiedData:O}))),r.a.createElement("div",{className:"chart-container"},r.a.createElement("div",{className:"chart-container-text"},r.a.createElement("h3",null,"Service ","".concat(e.player.typeOfOtherService2))),r.a.createElement("div",{className:"chart-container-chart"},r.a.createElement(_,{dataArray:m,modifiedData:N})))),r.a.createElement("div",{className:"my-service-trade-container"},r.a.createElement("div",{className:"chart-container"},r.a.createElement("div",{className:"chart-container-text"},r.a.createElement("h3",null,"Service ","".concat(e.player.typeOfService))),r.a.createElement("div",{className:"chart-container-chart"},r.a.createElement(_,{dataArray:E,modifiedData:w}))))))},U=function(){var e=v(),t=e.gameData,a=e.isTradeModalOpen,c=e.closeTradeModal,l=e.tradeModalContent,i=Object(n.useState)(),u=Object(d.a)(i,2),m=u[0],p=u[1],f=Object(n.useState)(!1),b=Object(d.a)(f,2),E=b[0],h=b[1],y=Object(n.useState)(""),x=Object(d.a)(y,2),k=x[0],S=x[1],N=Object(n.useState)([]),j=Object(d.a)(N,2),C=j[0],F=j[1],w=function(){var e=Object(s.a)(o.a.mark((function e(){var a,n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!==m&&""!==m){e.next=6;break}S("You must enter a value"),h(!0),e.next=33;break;case 6:if(!(isNaN(m)||m<0)){e.next=11;break}S("Input must be a positive number"),h(!0),e.next=33;break;case 11:if(o=m,!((Math.floor(o).toString()===o?0:o.toString().split(".")[1].length||0)>1)){e.next=16;break}S("Input value can have at most one decimal place"),h(!0),e.next=33;break;case 16:if(!(parseFloat(l.price)+parseFloat(m)>t.player.balance)){e.next=21;break}S("Price and TxFee is higher than balance"),h(!0),e.next=33;break;case 21:return a=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),r={orderId:l._id,txFee:parseFloat(m)},i={headers:{Authorization:"Bearer "+a}},e.next=27,O.a.post("/player/createTransaction/".concat(n),r,i);case 27:e.sent,c(),S(""),h(!1),p(),document.getElementById("inputHolder").value="";case 33:e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),void 0!==e.t0.response&&"Trade already exists"===e.t0.response.data.message&&(S("Trade with this person already exists"),h(!0));case 38:case"end":return e.stop()}var o}),e,null,[[0,35]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.allPendingTransactions.sort((function(e,t){return parseInt(t.txFee)-parseInt(e.txFee)}));case 2:return a=e.sent,e.next=5,Promise.all(a.map(function(){var e=Object(s.a)(o.a.mark((function e(a){var n,r,c,l,i,s,u,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.consumer,r=a.provider,c=a.typeOfService,l=a.amountOfService,i=a.price,s=a.txFee,e.next=3,t.players.filter((function(e){return e._id===n}));case 3:return u=e.sent,e.next=6,t.players.filter((function(e){return e._id===r}));case 6:if(m=e.sent,Array.isArray(m)&&m.length){e.next=9;break}return e.abrupt("return",{id:a._id,consumer:u[0].playerName,provider:"Blockchain",typeOfService:c,amountOfService:l,price:i,txFee:s,type:"cancel transaction"});case 9:return e.abrupt("return",{id:a._id,consumer:u[0].playerName,provider:m[0].playerName,typeOfService:c,amountOfService:l,price:i,txFee:s,type:"cancel transaction"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:n=e.sent,F(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),r.a.createElement("div",{className:"".concat(a?"modal-confirm-overlay show-modal-confirm":"modal-confirm-overlay")},r.a.createElement("div",{className:"modal-confirm-container"},r.a.createElement("h3",null,"Create Trade"),r.a.createElement("div",{className:"modal-confirm-container-data"},r.a.createElement("div",{className:"modal-confirm-container-input"},r.a.createElement("ul",null,r.a.createElement("li",null,"Player: ",l.playerName),r.a.createElement("li",null,"typeOfService: ",l.typeOfService),r.a.createElement("li",null,"price: ",l.price)),r.a.createElement("div",{className:"trade-modal-input-group"},r.a.createElement("label",{htmlFor:"txFee"},"Tx Fee"),r.a.createElement("div",{className:"trade-modal-input-group-container"},r.a.createElement("input",{type:"text",name:"txFee",id:"inputHolder",placeholder:"Enter tx fee",onChange:function(e){return p(e.target.value)}}))),r.a.createElement("div",{className:"".concat(E?"trade-modal-input-alert show-trade-modal-input-alert":"trade-modal-input-alert")},k)),r.a.createElement("div",{className:"trade-modal-table-container"},r.a.createElement("table",{className:"modal-table-pending-transactions"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"table-pending-transactions-head"},"No."),r.a.createElement("th",{className:"table-pending-transactions-head"},"Pending transactions"),r.a.createElement("th",{className:"table-pending-transactions-head"},"Tx Fee"))),r.a.createElement("tbody",null,C.map((function(e,t){return r.a.createElement("tr",{key:e.id,"data-tip":!0,"data-for":e.id},r.a.createElement("td",null,r.a.createElement("strong",null,t+1)),r.a.createElement("td",null,e.consumer," \u21c6 ",e.provider),r.a.createElement("td",null,e.txFee))})))))),r.a.createElement("button",{className:"close-modal-btn",onClick:function(){c(),S(""),h(!1),p(),document.getElementById("inputHolder").value=""}},r.a.createElement(g.i,null)),r.a.createElement("button",{className:"confirm-modal-btn",onClick:w},"Confirm")))},H=function(){var e=v(),t=e.isCancelOrderModalOpen,a=e.closeCancelOrderModal,n=e.cancelOrderModalContent,c=function(){var e=Object(s.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("auth-token"),r=localStorage.getItem("playerId"),e.next=5,O.a.delete("/player/cancelOrder/".concat(r),{headers:{Authorization:"Bearer "+t},data:{orderId:n._id}});case 5:e.sent,a(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"".concat(t?"modal-confirm-overlay show-modal-confirm":"modal-confirm-overlay")},r.a.createElement("div",{className:"modal-confirm-container"},r.a.createElement("h3",null,"Are you sure you want to cancel offer:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Player: ",n.playerName),r.a.createElement("li",null,"typeOfService: ",n.typeOfService),r.a.createElement("li",null,"price: ",n.price)),r.a.createElement("button",{className:"close-modal-btn",onClick:a},r.a.createElement(g.i,null)),r.a.createElement("button",{className:"confirm-modal-btn",onClick:c},"Confirm")))},L=function(){var e=v(),t=e.gameData,a=e.isGameOn,c=e.setModalContent;return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),""!==t&&""!==n?a||c("Wait for the admin to start the game!"):c("Please log in!");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",null,r.a.createElement("div",null,t.player?r.a.createElement("div",null,a?r.a.createElement("div",null,r.a.createElement("div",{className:"home-grid"},r.a.createElement("div",{className:"item-sidebar"},r.a.createElement(k,null)),r.a.createElement("div",{className:"item-content"},r.a.createElement(z,null))),r.a.createElement(U,null),r.a.createElement(H,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null))))},R=a(276),G=function(e){e.dataWithArc;var t=e.centerX,a=e.centerY,n=v().gameData.totalStake;return r.a.createElement("text",{x:t,y:a,textAnchor:"middle",dominantBaseline:"central",style:{fontSize:"25px",fontWeight:"500"}},n)},W=function(e){var t=e.data;return r.a.createElement(R.a,{data:t,theme:{fontSize:16,fontFamily:"Roboto, sans-serif",axis:{legend:{text:{fontSize:"16px",fontWeight:"bold",fontFamily:"Roboto, sans-serif"}}}},margin:{top:20,right:20,bottom:20,left:20},innerRadius:.3,padAngle:1,cornerRadius:3,colors:{scheme:"yellow_orange_red"},borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},enableRadialLabels:!1,sliceLabelsSkipAngle:10,sliceLabelsTextColor:"#333333",sortByValue:!0,layers:["slices","sliceLabels",G]})},Y=a(277),V=function(){var e=v(),t=e.gameData,a=e.openConfirmModal,c=e.setConfirmModalContent,l=Object(n.useState)([]),i=Object(d.a)(l,2),u=i[0],m=i[1],p=Object(n.useState)(""),f=Object(d.a)(p,2),b=f[0],E=f[1],h=Object(n.useState)(0),y=Object(d.a)(h,2),O=y[0],x=y[1];function k(e){var t=new Date(1e3*Math.round(e/1e3));return 0===t.getUTCMinutes()?t.getUTCSeconds()+"s":t.getUTCMinutes()+"min "+t.getUTCSeconds()+"s"}return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.allPendingTransactions.sort((function(e,t){return parseFloat(t.txFee)-parseFloat(e.txFee)}));case 2:return a=e.sent,e.next=5,Promise.all(a.map(function(){var e=Object(s.a)(o.a.mark((function e(a){var n,r,c,l,i,s,u,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.consumer,r=a.provider,c=a.typeOfService,l=a.amountOfService,i=a.price,s=a.txFee,e.next=3,t.players.filter((function(e){return e._id===n}));case 3:return u=e.sent,e.next=6,t.players.filter((function(e){return e._id===r}));case 6:if(m=e.sent,Array.isArray(m)&&m.length){e.next=9;break}return e.abrupt("return",{id:a._id,consumer:u[0].playerName,provider:"Blockchain",typeOfService:c,amountOfService:l,price:i,txFee:s,type:"cancel transaction"});case 9:return e.abrupt("return",{id:a._id,consumer:u[0].playerName,provider:m[0].playerName,typeOfService:c,amountOfService:l,price:i,txFee:s,type:"cancel transaction"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:n=e.sent,m(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),function(){var e=Object(s.a)(o.a.mark((function e(){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Date(t.miningTime).getTime();case 2:return a=e.sent,n=1e4-(Date.now()-a),e.next=6,Math.floor(100*(1-(Date.now()-a)/1e4));case 6:((r=e.sent)<0||n<0)&&(r=0,n=0),E(k(n)),x(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pending-transactions-container"},r.a.createElement("div",{className:"mining-progress-container"},r.a.createElement("div",{className:"mining-progress-flex"},r.a.createElement("p",null,"Mining"),r.a.createElement("div",{className:"mining-progress"},r.a.createElement("div",{className:"mining-progress-filler",style:{width:"".concat(O,"%")}}))),r.a.createElement("span",{className:"mining-progress-text"},"Time left: ",b)),r.a.createElement("div",{className:"table-pending-transactions-container"},r.a.createElement("table",{className:"table-pending-transactions"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"table-pending-transactions-head"},"No."),r.a.createElement("th",{className:"table-pending-transactions-head"},"Pending transactions"),r.a.createElement("th",{className:"table-pending-transactions-head"},"Tx Fee"))),r.a.createElement("tbody",null,u.map((function(e,n){return r.a.createElement("tr",{key:e.id,"data-tip":!0,"data-for":e.id,style:{background:"".concat(e.consumer===t.player.playerName||e.provider===t.player.playerName?"#fffd6c":"")}},r.a.createElement("td",null,r.a.createElement("strong",null,n+1)),r.a.createElement("td",null,e.consumer," \u21c6 ",e.provider,e.consumer===t.player.playerName?r.a.createElement("button",{className:"cancel-transaction-btn",onClick:function(){(e.consumer===t.player.playerName||e.provider===t.player.playerName)&&(c(e),a())}},r.a.createElement(g.i,null)):""),r.a.createElement("td",null,e.txFee),r.a.createElement("td",{className:"table-pending-transactions-tooltip"},r.a.createElement(Y.a,{className:"table-pending-transactions-head-tooltip-react",id:e.id,place:"bottom",type:"dark",effect:"solid"},r.a.createElement("ul",null,r.a.createElement("li",null,"Consumer: ",e.consumer),r.a.createElement("li",null,"Provider: ",e.provider),r.a.createElement("li",null,"typeOfService: ",e.typeOfService),r.a.createElement("li",null,"price: ",e.price)))))})))))))},q=function(){var e=v().gameData,t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)("time"),u=Object(d.a)(i,2),m=u[0],p=u[1],f=Object(n.useState)("ascending"),b=Object(d.a)(f,2),E=b[0],h=b[1],y=Object(n.useState)([{type:"A",isChecked:!1},{type:"B",isChecked:!1},{type:"C",isChecked:!1},{type:"Stake",isChecked:!1},{type:"Unstake",isChecked:!1}]),O=Object(d.a)(y,2),x=O[0],k=O[1],S=function(){var e=Object(s.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Date(t);case 2:return a=e.sent,e.abrupt("return",a.toLocaleTimeString("it-IT"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("time"!==m){e.next=4;break}return e.next=3,t.sort((function(e,t){var a=e.createdAt.split(":"),n=60*parseInt(a[0],10)*60+60*parseInt(a[1],10)+parseInt(a[2],10),r=t.createdAt.split(":"),c=60*parseInt(r[0],10)*60+60*parseInt(r[1],10)+parseInt(r[2],10);return"descending"===E?c-n:"ascending"===E?n-c:void 0}));case 3:return e.abrupt("return",e.sent);case 4:if("consumer"!==m){e.next=8;break}return e.next=7,t.sort((function(e,t){var a=e.consumer.toUpperCase(),n=t.consumer.toUpperCase();return"descending"===E?a<n?-1:a>n?1:0:"ascending"===E?a>n?-1:a<n?1:0:void 0}));case 7:return e.abrupt("return",e.sent);case 8:if("provider"!==m){e.next=12;break}return e.next=11,t.sort((function(e,t){var a=e.provider.toUpperCase(),n=t.provider.toUpperCase();return"descending"===E?a<n?-1:a>n?1:0:"ascending"===E?a>n?-1:a<n?1:0:void 0}));case 11:return e.abrupt("return",e.sent);case 12:if("typeOfService"!==m){e.next=16;break}return e.next=15,t.sort((function(e,t){var a=e.typeOfService.toUpperCase(),n=t.typeOfService.toUpperCase();return"descending"===E?a<n?-1:a>n?1:0:"ascending"===E?a>n?-1:a<n?1:0:void 0}));case 15:return e.abrupt("return",e.sent);case 16:if("price"!==m){e.next=25;break}if("descending"!==E){e.next=21;break}return e.next=20,t.sort((function(e,t){return parseFloat(t.price)-parseFloat(e.price)}));case 20:return e.abrupt("return",e.sent);case 21:if("ascending"!==E){e.next=25;break}return e.next=24,t.sort((function(e,t){return parseFloat(e.price)-parseFloat(t.price)}));case 24:return e.abrupt("return",e.sent);case 25:if("txFee"!==m){e.next=34;break}if("descending"!==E){e.next=30;break}return e.next=29,t.sort((function(e,t){return parseFloat(t.txFee)-parseFloat(e.txFee)}));case 29:return e.abrupt("return",e.sent);case 30:if("ascending"!==E){e.next=34;break}return e.next=33,t.sort((function(e,t){return parseFloat(e.txFee)-parseFloat(t.txFee)}));case 33:return e.abrupt("return",e.sent);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.name,n=t.target.checked,e.next=4,x.map((function(e){return e.type===a?Object(D.a)(Object(D.a)({},e),{},{isChecked:n}):e}));case 4:r=e.sent,k(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(s.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.filter((function(e){return e.isChecked}));case 2:return a=e.sent,e.next=5,a.map((function(e){return e.type}));case 5:if(n=e.sent,Array.isArray(n)&&n.length){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",t.filter((function(e){return n.includes(e.typeOfService)})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var t=Object(s.a)(o.a.mark((function t(){var a,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.allTransactions.map(function(){var t=Object(s.a)(o.a.mark((function t(a){var n,r,c,l,i,s,u,m,d,p;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.consumer,r=a.provider,c=a.typeOfService,l=a.amountOfService,i=a.price,s=a.txFee,u=a.createdAt,t.next=3,e.players.filter((function(e){return e._id===n}));case 3:return m=t.sent,t.next=6,e.players.filter((function(e){return e._id===r}));case 6:return d=t.sent,t.next=9,S(u);case 9:if(p=t.sent,Array.isArray(d)&&d.length){t.next=12;break}return t.abrupt("return",{id:a._id,consumer:m[0].playerName,provider:"Blockchain",typeOfService:c,amountOfService:l,price:i,txFee:s,type:"cancel transaction",createdAt:p});case 12:return t.abrupt("return",{id:a._id,consumer:m[0].playerName,provider:d[0].playerName,typeOfService:c,amountOfService:l,price:i,txFee:s,type:"cancel transaction",createdAt:p});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return a=t.sent,t.next=5,C(a);case 5:return n=t.sent,t.next=8,N(n);case 8:r=t.sent,l(r);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-all-transactions-container"},r.a.createElement("div",{className:"filter-all-transactions"},x.map((function(e){return r.a.createElement("label",{className:"checkbox-container",key:e.type},e.type,r.a.createElement("input",{type:"checkbox",name:e.type,checked:e.isChecked,onChange:j}),r.a.createElement("span",{className:"checkmark"}))}))),r.a.createElement("div",{className:"table-all-transactions-overflow"},r.a.createElement("table",{className:"table-all-transactions"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{onClick:function(){p("time"),"ascending"===E&&h("descending"),"descending"===E&&h("ascending")}},"Time ","time"===m?"ascending"===E?r.a.createElement(g.b,null):r.a.createElement(g.a,null):""),r.a.createElement("th",{onClick:function(){p("consumer"),"ascending"===E&&h("descending"),"descending"===E&&h("ascending")}},"Consumer ","consumer"===m?"ascending"===E?r.a.createElement(g.b,null):r.a.createElement(g.a,null):""),r.a.createElement("th",{onClick:function(){p("provider"),"ascending"===E&&h("descending"),"descending"===E&&h("ascending")}},"Provider ","provider"===m?"ascending"===E?r.a.createElement(g.b,null):r.a.createElement(g.a,null):""),r.a.createElement("th",{onClick:function(){p("typeOfService"),"ascending"===E&&h("descending"),"descending"===E&&h("ascending")}},"Type of service ","typeOfService"===m?"ascending"===E?r.a.createElement(g.b,null):r.a.createElement(g.a,null):""),r.a.createElement("th",{onClick:function(){p("price"),"ascending"===E&&h("descending"),"descending"===E&&h("ascending")}},"Price/Amount ","price"===m?"ascending"===E?r.a.createElement(g.b,null):r.a.createElement(g.a,null):""),r.a.createElement("th",{onClick:function(){p("txFee"),"ascending"===E&&h("descending"),"descending"===E&&h("ascending")}},"Tx Fee ","txFee"===m?"ascending"===E?r.a.createElement(g.b,null):r.a.createElement(g.a,null):""))),r.a.createElement("tbody",null,c.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.createdAt),r.a.createElement("td",null,e.consumer),r.a.createElement("td",null,e.provider),r.a.createElement("td",null,e.typeOfService),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.txFee))})))))))},J=function(){var e=v().gameData,t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(0),u=Object(d.a)(i,2),m=u[0],p=u[1],f=Object(n.useState)(0),b=Object(d.a)(f,2),E=b[0],g=b[1],h=Object(n.useState)(),y=Object(d.a)(h,2),x=y[0],k=y[1],S=Object(n.useState)(!1),N=Object(d.a)(S,2),j=N[0],C=N[1],F=Object(n.useState)(""),w=Object(d.a)(F,2),I=w[0],A=w[1],M=function(e){return Math.floor(e).toString()===e?0:e.toString().split(".")[1].length||0},T=function(){var t=Object(s.a)(o.a.mark((function t(){var a,n,r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,void 0!==x&&""!==x&&void 0!==E&&""!==E){t.next=6;break}A("You must enter a value"),C(!0),t.next=34;break;case 6:if(!(isNaN(x)||x<=0||isNaN(E)||E<=0)){t.next=11;break}A("Amount and tx fee must be a positive number bigger than 0"),C(!0),t.next=34;break;case 11:if(!(M(x)>1||M(E)>1)){t.next=16;break}A("Input value can have at most one decimal place"),C(!0),t.next=34;break;case 16:if(!(parseFloat(E)+parseFloat(x)>e.player.balance)){t.next=21;break}A("Amount + TxFee is bigger than balance"),C(!0),t.next=34;break;case 21:return a=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),r={stake:E,txFee:x},c={headers:{Authorization:"Bearer "+a}},t.next=27,O.a.post("/player/stake/".concat(n),r,c);case 27:t.sent,g(0),A(""),C(!1),k(),document.getElementById("inputHolder").value="",document.getElementById("amountHolder").value="";case 34:t.next=39;break;case 36:t.prev=36,t.t0=t.catch(0),console.log(t.t0);case 39:case"end":return t.stop()}}),t,null,[[0,36]])})));return function(){return t.apply(this,arguments)}}(),B=function(){var t=Object(s.a)(o.a.mark((function t(){var a,n,r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,void 0!==x&&""!==x&&void 0!==E&&""!==E){t.next=6;break}A("You must enter a value"),C(!0),t.next=34;break;case 6:if(!(isNaN(x)||x<=0||isNaN(E)||E<=0)){t.next=11;break}A("Amount and tx fee must be a positive number bigger than 0"),C(!0),t.next=34;break;case 11:if(!(M(x)>1||M(E)>1)){t.next=16;break}A("Input value can have at most one decimal place"),C(!0),t.next=34;break;case 16:if(!(parseFloat(E)>e.player.stake)){t.next=21;break}A("Amount is bigger than your stake"),C(!0),t.next=34;break;case 21:return a=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),r={unstake:E,txFee:x},c={headers:{Authorization:"Bearer "+a}},t.next=27,O.a.post("/player/unstake/".concat(n),r,c);case 27:t.sent,g(0),A(""),C(!1),k(),document.getElementById("inputHolder").value="",document.getElementById("amountHolder").value="";case 34:t.next=39;break;case 36:t.prev=36,t.t0=t.catch(0),console.log(t.t0);case 39:case"end":return t.stop()}}),t,null,[[0,36]])})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var t=Object(s.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.players.map((function(e){return{id:e.playerName,value:parseInt(e.stake)}}));case 2:a=t.sent,l(a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()();var t=Math.floor(e.player.stake/e.totalStake*100);p(t)}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"blockchain-container"},r.a.createElement("div",{className:"blockchain-info-container"},r.a.createElement(V,null),r.a.createElement("div",{className:"piechart-container"},r.a.createElement("div",{className:"piechart-container-text"},r.a.createElement("h3",null,"Blockchain - stake"),r.a.createElement("h4",null,"Your stake: ",e.player.stake," (",m,"%)")),r.a.createElement("div",{className:"piechart-container-chart-stake"},r.a.createElement("div",{className:"piechart-container-chart"},r.a.createElement(W,{data:c})),r.a.createElement("div",{className:"stake-input-container"},r.a.createElement("div",{className:"modal-input-group"},r.a.createElement("label",{htmlFor:"Amount"},"Amount"),r.a.createElement("div",{className:"modal-input-group-container"},r.a.createElement("input",{style:{backgroundColor:"#dbdbdb"},type:"text",name:"amount",id:"amountHolder",placeholder:"Enter amount",onChange:function(e){return g(e.target.value)}}))),r.a.createElement("div",{className:"modal-input-group"},r.a.createElement("label",{htmlFor:"txFee"},"Tx Fee"),r.a.createElement("div",{className:"modal-input-group-container"},r.a.createElement("input",{style:{backgroundColor:"#dbdbdb"},type:"text",name:"txFee",id:"inputHolder",placeholder:"Enter tx fee",onChange:function(e){return k(e.target.value)}}))),r.a.createElement("div",{className:"".concat(j?"modal-input-alert show-modal-input-alert":"modal-input-alert")},I),r.a.createElement("button",{className:"confirm-stake-btn",onClick:function(){return T()}},"Stake"),r.a.createElement("button",{className:"confirm-unstake-btn",onClick:function(){return B()}},"Unstake"))))),r.a.createElement("div",{className:"all-transactions-container"},r.a.createElement("h3",null,"Transactions History"),r.a.createElement(q,null))))},X=function(){var e=v(),t=e.isConfirmModalOpen,a=e.closeConfirmModal,n=e.confirmModalContent,c=function(){var e=Object(s.a)(o.a.mark((function e(){var t,r,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=localStorage.getItem("auth-token"),r=localStorage.getItem("playerId"),"cancel transaction"!==n.type){e.next=7;break}return e.next=6,O.a.delete("/player/cancelTransaction/".concat(r),{headers:{Authorization:"Bearer "+t},data:{transactionId:n.id}});case 6:e.sent;case 7:if("cancel trade"!==n.type){e.next=11;break}return e.next=10,O.a.delete("/player/cancelTrade/".concat(r),{headers:{Authorization:"Bearer "+t},data:{tradeId:n.id}});case 10:e.sent;case 11:if("accept trade"!==n.type){e.next=17;break}return c={tradeId:n.id},l={headers:{Authorization:"Bearer "+t}},e.next=16,O.a.post("/player/acceptTrade/".concat(r),c,l);case 16:e.sent;case 17:if("reject trade"!==n.type){e.next=21;break}return e.next=20,O.a.delete("/player/rejectTrade/".concat(r),{headers:{Authorization:"Bearer "+t},data:{tradeId:n.id}});case 20:e.sent;case 21:a(),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.log(e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"".concat(t?"modal-confirm-overlay show-modal-confirm":"modal-confirm-overlay")},r.a.createElement("div",{className:"modal-confirm-container"},r.a.createElement("h3",null,"Are you sure you want to ",n.type,":"),r.a.createElement("ul",null,r.a.createElement("li",null,"Consumer: ",n.consumer),r.a.createElement("li",null,"Provider: ",n.provider),r.a.createElement("li",null,"typeOfService: ",n.typeOfService),r.a.createElement("li",null,"price: ",n.price),r.a.createElement("li",null,"txFee: ",n.txFee)),r.a.createElement("button",{className:"close-modal-btn",onClick:a},r.a.createElement(g.i,null)),r.a.createElement("button",{className:"confirm-modal-btn",onClick:c},"Confirm")))},K=function(){var e=v(),t=e.gameData,a=e.isGameOn,c=e.setModalContent;return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("auth-token"),n=localStorage.getItem("playerId"),""!==t&&""!==n?a||c("Wait for the admin to start the game!"):c("Please log in!");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",null,r.a.createElement("div",null,t.player?r.a.createElement("div",null,a?r.a.createElement("div",null,r.a.createElement("div",{className:"home-grid"},r.a.createElement("div",{className:"item-sidebar"},r.a.createElement(k,null)),r.a.createElement("div",{className:"item-content"},r.a.createElement(J,null))),r.a.createElement(X,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null))))},Q=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Ups something went wrong!"))};O.a.defaults.baseURL="5.189.178.30:8000";var Z=function(){var e=v(),t=e.setIsGameOn,a=e.setGameData,c=function(){var e=Object(s.a)(o.a.mark((function e(){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem("auth-token"),r=localStorage.getItem("playerId"),e.next=5,O.a.get("/player/gameData/".concat(r),{headers:{authorization:"Bearer "+n}});case 5:c=e.sent,a({token:n,player:c.data.player,orders:c.data.orders,allPendingTransactions:c.data.allPendingTransactions,totalStake:c.data.totalStake,players:c.data.players,allTransactions:c.data.allTransactions,miningTime:c.data.miningTime}),t(c.data.isGameOn),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),void 0!==e.t0.response&&"Auth failed"===e.t0.response.data.message&&(localStorage.setItem("auth-token",""),localStorage.setItem("playerId",""),window.location.reload(!1));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("auth-token"),a=localStorage.getItem("playerId"),""===t||""===a){e.next=6;break}return c(),n=setInterval((function(){c()}),100),e.abrupt("return",(function(){clearInterval(n)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,null,r.a.createElement(E,null),r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",component:A}),r.a.createElement(m.a,{path:"/login",component:B}),r.a.createElement(m.a,{path:"/trade",component:L}),r.a.createElement(m.a,{path:"/blockchain",component:K}),r.a.createElement(m.a,{path:"*",component:Q}))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(f,null,r.a.createElement(Z,null))),document.getElementById("root"))}},[[292,1,2]]]);
//# sourceMappingURL=main.260fd778.chunk.js.map