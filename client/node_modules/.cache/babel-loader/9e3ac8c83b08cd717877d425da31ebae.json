{"ast":null,"code":"var _jsxFileName = \"/home/nejc/LDSE/SharedManufacturing/client/src/components/misc/Trades.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useGlobalContext } from \"../../context/context\";\nimport BarChart from '../misc/BarChart';\n\nconst Trade = () => {\n  const {\n    gameData\n  } = useGlobalContext();\n  const [dataArray1, setDataArray1] = useState([]);\n  const [dataArray2, setDataArray2] = useState([]);\n  const [dataArray3, setDataArray3] = useState([]);\n  const [modifiedDataArray1, setModifiedDataArray1] = useState([]);\n  const [modifiedDataArray2, setModifiedDataArray2] = useState([]);\n  const [modifiedDataArray3, setModifiedDataArray3] = useState([]);\n  /*const sortArray = async (array) => {\n      let namesArray = [];\n      for (const item of array) {\n          if (! await namesArray.includes(item.playerName)) {\n              await namesArray.push(item.playerName);\n          }\n      }\n      let finalArray = await Promise.all(namesArray.map( async (item) => {\n          let index = 0;\n          let orders = await array.filter(order => order.playerName === item);\n          orders = await orders.map((order) => {\n              index = index +1;\n              order.playerName = order.playerName+(index).toString();\n              return order;\n          });\n          return orders;\n      }));\n      return finalArray.flat();\n  };*/\n\n  useEffect(() => {\n    const sortDataArrays = async () => {\n      let array1 = await gameData.orders.filter(item => item.typeOfService === gameData.player.typeOfOtherService1);\n      let array2 = await gameData.orders.filter(item => item.typeOfService === gameData.player.typeOfOtherService2);\n      let array3 = await gameData.orders.filter(item => item.typeOfService === gameData.player.typeOfService);\n      await array1.forEach(item => {\n        item.price = parseFloat(item.price);\n        item.color = '#1E90FF';\n      });\n      await array2.forEach(item => {\n        item.price = parseFloat(item.price);\n        item.color = 'green';\n      });\n      await array3.forEach(item => {\n        item.price = parseFloat(item.price);\n\n        if (item.playerName === gameData.player.playerName) {\n          item.color = '#FFD700';\n        } else {\n          item.color = \"#FF8C00\";\n        }\n      });\n      await array1.sort((a, b) => parseInt(a.price) - parseInt(b.price));\n      await array2.sort((a, b) => parseInt(a.price) - parseInt(b.price));\n      await array3.sort((a, b) => parseInt(a.price) - parseInt(b.price));\n      const modifiedArray1 = await array1.map(item => {\n        if (item.price < 1) {\n          item.price = 1;\n          return item;\n        } else {\n          return item;\n        }\n      });\n      const modifiedArray2 = await array2.map(item => {\n        if (item.price < 1) {\n          item.price = 1;\n          return item;\n        } else {\n          return item;\n        }\n      });\n      const modifiedArray3 = await array3.map(item => {\n        if (item.price < 1) {\n          item.price = 1;\n          return item;\n        } else {\n          return item;\n        }\n      });\n      setDataArray1(array1);\n      setDataArray2(array2);\n      setDataArray3(array3);\n      setModifiedDataArray1(modifiedArray1);\n      setModifiedDataArray2(modifiedArray2);\n      setModifiedDataArray3(modifiedArray3);\n    };\n\n    sortDataArrays();\n  }, [gameData]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trades-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"other-services-trade-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chart-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chart-container-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 29\n    }\n  }, \"Service \", `${gameData.player.typeOfOtherService1}`)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chart-container-chart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(BarChart, {\n    data: dataArray1,\n    modifiedData: modifiedDataArray1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chart-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chart-container-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 29\n    }\n  }, \"Service \", `${gameData.player.typeOfOtherService2}`)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chart-container-chart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(BarChart, {\n    data: dataArray2,\n    modifiedData: modifiedDataArray2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-service-trade-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chart-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chart-container-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 29\n    }\n  }, \"Service \", `${gameData.player.typeOfService}`)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chart-container-chart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(BarChart, {\n    data: dataArray3,\n    modifiedData: modifiedDataArray3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }))))));\n};\n\nexport default Trade;","map":{"version":3,"sources":["/home/nejc/LDSE/SharedManufacturing/client/src/components/misc/Trades.js"],"names":["React","useState","useEffect","useGlobalContext","BarChart","Trade","gameData","dataArray1","setDataArray1","dataArray2","setDataArray2","dataArray3","setDataArray3","modifiedDataArray1","setModifiedDataArray1","modifiedDataArray2","setModifiedDataArray2","modifiedDataArray3","setModifiedDataArray3","sortDataArrays","array1","orders","filter","item","typeOfService","player","typeOfOtherService1","array2","typeOfOtherService2","array3","forEach","price","parseFloat","color","playerName","sort","a","b","parseInt","modifiedArray1","map","modifiedArray2","modifiedArray3"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { useGlobalContext} from \"../../context/context\";\nimport BarChart from '../misc/BarChart';\n\n\nconst Trade = () => {\n    const { gameData } = useGlobalContext();\n    const [dataArray1, setDataArray1] = useState([]);\n    const [dataArray2, setDataArray2] = useState([]);\n    const [dataArray3, setDataArray3] = useState([]);\n    const [modifiedDataArray1, setModifiedDataArray1] = useState([]);\n    const [modifiedDataArray2, setModifiedDataArray2] = useState([]);\n    const [modifiedDataArray3, setModifiedDataArray3] = useState([]);\n\n    /*const sortArray = async (array) => {\n        let namesArray = [];\n        for (const item of array) {\n            if (! await namesArray.includes(item.playerName)) {\n                await namesArray.push(item.playerName);\n            }\n        }\n        let finalArray = await Promise.all(namesArray.map( async (item) => {\n            let index = 0;\n            let orders = await array.filter(order => order.playerName === item);\n            orders = await orders.map((order) => {\n                index = index +1;\n                order.playerName = order.playerName+(index).toString();\n                return order;\n            });\n            return orders;\n        }));\n        return finalArray.flat();\n    };*/\n\n\n    useEffect(() => {\n        const sortDataArrays = async () => {\n            let array1 = await gameData.orders.filter(item => item.typeOfService === gameData.player.typeOfOtherService1);\n            let array2 = await gameData.orders.filter(item => item.typeOfService === gameData.player.typeOfOtherService2);\n            let array3 = await gameData.orders.filter(item => item.typeOfService === gameData.player.typeOfService);\n            await array1.forEach((item) => {\n                item.price = parseFloat(item.price);\n                item.color= '#1E90FF';\n            });\n            await array2.forEach((item) => {\n                item.price = parseFloat(item.price);\n                item.color= 'green';\n            });\n            await array3.forEach((item) => {\n                item.price = parseFloat(item.price);\n                if (item.playerName === gameData.player.playerName) {\n                    item.color= '#FFD700';\n                } else {\n                    item.color= \"#FF8C00\";\n                }\n            });\n            await array1.sort((a, b) => parseInt(a.price) - parseInt(b.price));\n            await array2.sort((a, b) => parseInt(a.price) - parseInt(b.price));\n            await array3.sort((a, b) => parseInt(a.price) - parseInt(b.price));\n            const modifiedArray1 = await array1.map((item) => {\n               if (item.price < 1) {\n                   item.price = 1;\n                   return item;\n               } else {\n                   return item;\n               }\n            });\n            const modifiedArray2 = await array2.map((item) => {\n                if (item.price < 1) {\n                    item.price = 1;\n                    return item;\n                } else {\n                    return item;\n                }\n            });\n            const modifiedArray3 = await array3.map((item) => {\n                if (item.price < 1) {\n                    item.price = 1;\n                    return item;\n                } else {\n                    return item;\n                }\n            });\n            setDataArray1(array1);\n            setDataArray2(array2);\n            setDataArray3(array3);\n            setModifiedDataArray1(modifiedArray1);\n            setModifiedDataArray2(modifiedArray2);\n            setModifiedDataArray3(modifiedArray3);\n        };\n        sortDataArrays();\n    }, [gameData]);\n\n    return (\n        <>\n            <div className=\"trades-container\">\n                <div className=\"other-services-trade-container\">\n                    <div className=\"chart-container\">\n                        <div className=\"chart-container-text\">\n                            <h3>Service {`${gameData.player.typeOfOtherService1}`}</h3>\n                        </div>\n                        <div className=\"chart-container-chart\">\n                            <BarChart data={dataArray1} modifiedData={modifiedDataArray1}/>\n                        </div>\n                    </div>\n                    <div className=\"chart-container\">\n                        <div className=\"chart-container-text\">\n                            <h3>Service {`${gameData.player.typeOfOtherService2}`}</h3>\n                        </div>\n                        <div className=\"chart-container-chart\">\n                            <BarChart data={dataArray2} modifiedData={modifiedDataArray2}/>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"my-service-trade-container\">\n                    <div className=\"chart-container\">\n                        <div className=\"chart-container-text\">\n                            <h3>Service {`${gameData.player.typeOfService}`}</h3>\n                        </div>\n                        <div className=\"chart-container-chart\">\n                            <BarChart data={dataArray3} modifiedData={modifiedDataArray3}/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </>\n    )\n};\n\nexport default Trade;"]},"metadata":{},"sourceType":"module"}