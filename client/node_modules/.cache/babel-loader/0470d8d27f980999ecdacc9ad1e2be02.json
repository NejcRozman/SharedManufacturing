{"ast":null,"code":"var _jsxFileName = \"/home/nejc/LDSE/SharedManufacturing/client/src/App.js\";\nimport React, { useEffect } from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport { useGlobalContext } from \"./context/context\";\nimport Navbar from './components/layout/Navbar';\nimport Home from './components/pages/Home';\nimport Login from \"./components/auth/Login\";\nimport Trade from './components/pages/Trade';\nimport Blockchain from './components/pages/Blockchain';\nimport Error from './components/pages/Error';\nimport Axios from \"axios/index\";\nAxios.defaults.baseURL = 'http://localhost:8000';\n\nfunction App() {\n  const {\n    setIsGameOn,\n    setGameData\n  } = useGlobalContext();\n\n  const getGameData = async () => {\n    try {\n      let token = localStorage.getItem(\"auth-token\");\n      let playerId = localStorage.getItem(\"playerId\");\n      const gameRes = await Axios.get(`/player/gameData/${playerId}`, {\n        headers: {\n          \"authorization\": \"Bearer \" + token\n        }\n      });\n      setGameData({\n        token,\n        player: gameRes.data.player,\n        orders: gameRes.data.orders,\n        allPendingTransactions: gameRes.data.allPendingTransactions,\n        totalStake: gameRes.data.totalStake,\n        players: gameRes.data.players,\n        allTransactions: gameRes.data.allTransactions,\n        miningTime: gameRes.data.miningTime\n      });\n      setIsGameOn(gameRes.data.isGameOn);\n    } catch (err) {\n      if (err.response !== undefined && err.response.data.message === \"Auth failed\") {\n        localStorage.setItem(\"auth-token\", \"\");\n        localStorage.setItem(\"playerId\", \"\");\n        window.location.reload(false);\n      }\n    }\n  };\n\n  useEffect(() => {\n    const checkLoggedInAndGame = async () => {\n      let token = localStorage.getItem(\"auth-token\");\n      let playerId = localStorage.getItem(\"playerId\");\n\n      if (token !== (null || \"\") && playerId !== (null || \"\")) {\n        getGameData();\n        const interval = setInterval(() => {\n          getGameData();\n        }, 100);\n        return () => {\n          clearInterval(interval);\n        };\n      }\n    };\n\n    checkLoggedInAndGame();\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: Home,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/login\",\n    component: Login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/trade\",\n    component: Trade,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/blockchain\",\n    component: Blockchain,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"*\",\n    component: Error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }))));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/nejc/LDSE/SharedManufacturing/client/src/App.js"],"names":["React","useEffect","BrowserRouter","Router","Switch","Route","useGlobalContext","Navbar","Home","Login","Trade","Blockchain","Error","Axios","defaults","baseURL","App","setIsGameOn","setGameData","getGameData","token","localStorage","getItem","playerId","gameRes","get","headers","player","data","orders","allPendingTransactions","totalStake","players","allTransactions","miningTime","isGameOn","err","response","undefined","message","setItem","window","location","reload","checkLoggedInAndGame","interval","setInterval","clearInterval"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport {useGlobalContext} from \"./context/context\";\n\nimport Navbar from './components/layout/Navbar';\nimport Home from './components/pages/Home';\nimport Login from \"./components/auth/Login\";\nimport Trade from './components/pages/Trade';\nimport Blockchain from './components/pages/Blockchain';\nimport Error from './components/pages/Error';\nimport Axios from \"axios/index\";\n\nAxios.defaults.baseURL = 'http://localhost:8000';\n\nfunction App() {\n    const { setIsGameOn, setGameData } = useGlobalContext();\n\n    const getGameData = async () => {\n        try {\n            let token = localStorage.getItem(\"auth-token\");\n            let playerId = localStorage.getItem(\"playerId\");\n            const gameRes = await Axios.get(`/player/gameData/${playerId}`, {\n                headers: {\"authorization\": \"Bearer \" + token}\n            });\n            setGameData({\n                token,\n                player: gameRes.data.player,\n                orders: gameRes.data.orders,\n                allPendingTransactions: gameRes.data.allPendingTransactions,\n                totalStake: gameRes.data.totalStake,\n                players: gameRes.data.players,\n                allTransactions: gameRes.data.allTransactions,\n                miningTime: gameRes.data.miningTime\n            });\n            setIsGameOn(gameRes.data.isGameOn);\n        } catch (err) {\n            if (err.response !== undefined && err.response.data.message === \"Auth failed\") {\n                localStorage.setItem(\"auth-token\", \"\");\n                localStorage.setItem(\"playerId\", \"\");\n                window.location.reload(false);\n            }\n        }\n    };\n\n    useEffect(() => {\n        const checkLoggedInAndGame = async () => {\n            let token = localStorage.getItem(\"auth-token\");\n            let playerId = localStorage.getItem(\"playerId\");\n            if (token !== (null || \"\") && playerId !== (null || \"\")) {\n                getGameData();\n                const interval = setInterval(() => {\n                    getGameData();\n                }, 100);\n                return () => {\n                    clearInterval(interval);\n                };\n            }\n        };\n        checkLoggedInAndGame();\n    }, []);\n\n    return (\n        <>\n            <Router>\n                <Navbar/>\n                <Switch>\n                    <Route exact path={\"/\"} component={Home} />\n                    <Route path={\"/login\"} component={Login}/>\n                    <Route path={\"/trade\"} component={Trade}/>\n                    <Route path={\"/blockchain\"} component={Blockchain}/>\n                    <Route path={\"*\"} component={Error}/>\n                </Switch>\n            </Router>\n        </>\n    )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}