{"ast":null,"code":"var _jsxFileName = \"/home/nejc/LDSE/SharedManufacturing/client/src/components/misc/AllTransactionsTable.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useGlobalContext } from \"../../context/context\";\n\nconst AllTransactionsTable = () => {\n  const {\n    gameData\n  } = useGlobalContext();\n  const [tableDataArray, setTableDataArray] = useState([]);\n  const [sortBy, setSortBy] = useState('typeOfService');\n  const [orderOfSort, setOrderOfSort] = useState('ascending');\n\n  const displayTime = async time => {\n    const createdMillis = await new Date(time);\n    return createdMillis.toLocaleTimeString('it-IT');\n  };\n\n  const sortDataArray = async () => {\n    if (sortBy === 'time') {\n      return await gameData.allTransactions.sort((a, b) => b.createdAt - a.createdAt);\n    }\n\n    if (sortBy === 'consumer') {\n      return await gameData.allTransactions.sort((a, b) => b.consumer - a.consumer);\n    }\n\n    if (sortBy === 'provider') {\n      return await gameData.allTransactions.sort((a, b) => b.provider - a.provider);\n    }\n\n    if (sortBy === 'typeOfService') {\n      return await gameData.allTransactions.sort((a, b) => {\n        let textA = a.typeOfService.toUpperCase();\n        let textB = b.typeOfService.toUpperCase();\n        return textA < textB ? -1 : textA > textB ? 1 : 0;\n      });\n    }\n\n    if (sortBy === 'price') {\n      return await gameData.allTransactions.sort((a, b) => parseFloat(b.price) - parseFloat(a.price));\n    }\n\n    if (sortBy === 'txFee') {\n      return await gameData.allTransactions.sort((a, b) => parseFloat(b.txFee) - parseFloat(a.txFee));\n    }\n  };\n\n  useEffect(() => {\n    const renderTableData = async () => {\n      const dataArray = await sortDataArray();\n      const transactionsArray = await Promise.all(dataArray.map(async item => {\n        let {\n          consumer,\n          provider,\n          typeOfService,\n          amountOfService,\n          price,\n          txFee,\n          createdAt\n        } = item;\n        const consumerObject = await gameData.players.filter(player => player._id === consumer);\n        const providerObject = await gameData.players.filter(player => player._id === provider);\n        const timeString = await displayTime(createdAt);\n\n        if (!Array.isArray(providerObject) || !providerObject.length) {\n          return {\n            id: item._id,\n            consumer: consumerObject[0].playerName,\n            provider: \"Blockchain\",\n            typeOfService: typeOfService,\n            amountOfService: amountOfService,\n            price: price,\n            txFee: txFee,\n            type: \"cancel transaction\",\n            createdAt: timeString\n          };\n        }\n\n        return {\n          id: item._id,\n          consumer: consumerObject[0].playerName,\n          provider: providerObject[0].playerName,\n          typeOfService: typeOfService,\n          amountOfService: amountOfService,\n          price: price,\n          txFee: txFee,\n          type: \"cancel transaction\",\n          createdAt: timeString\n        };\n      }));\n      setTableDataArray(transactionsArray);\n    };\n\n    renderTableData();\n  }, [gameData]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table-all-transactions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, \"Time\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, \"Consumer\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, \"Provider\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, \"Type of service\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, \"Price/Amount\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, \"Tx Fee\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, tableDataArray.map(item => /*#__PURE__*/React.createElement(\"tr\", {\n    key: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 33\n    }\n  }, item.createdAt), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 33\n    }\n  }, item.consumer), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 33\n    }\n  }, item.provider), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 33\n    }\n  }, item.typeOfService), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 33\n    }\n  }, item.price), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 33\n    }\n  }, item.txFee))))));\n};\n\nexport default AllTransactionsTable;","map":{"version":3,"sources":["/home/nejc/LDSE/SharedManufacturing/client/src/components/misc/AllTransactionsTable.js"],"names":["React","useState","useEffect","useGlobalContext","AllTransactionsTable","gameData","tableDataArray","setTableDataArray","sortBy","setSortBy","orderOfSort","setOrderOfSort","displayTime","time","createdMillis","Date","toLocaleTimeString","sortDataArray","allTransactions","sort","a","b","createdAt","consumer","provider","textA","typeOfService","toUpperCase","textB","parseFloat","price","txFee","renderTableData","dataArray","transactionsArray","Promise","all","map","item","amountOfService","consumerObject","players","filter","player","_id","providerObject","timeString","Array","isArray","length","id","playerName","type"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAASC,gBAAT,QAAgC,uBAAhC;;AAEA,MAAMC,oBAAoB,GAAG,MAAM;AAC/B,QAAM;AAAEC,IAAAA;AAAF,MAAiBF,gBAAgB,EAAvC;AACA,QAAM,CAACG,cAAD,EAAiBC,iBAAjB,IAAsCN,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACO,MAAD,EAASC,SAAT,IAAsBR,QAAQ,CAAC,eAAD,CAApC;AACA,QAAM,CAACS,WAAD,EAAcC,cAAd,IAAgCV,QAAQ,CAAC,WAAD,CAA9C;;AAEA,QAAMW,WAAW,GAAG,MAAOC,IAAP,IAAgB;AAChC,UAAMC,aAAa,GAAG,MAAM,IAAIC,IAAJ,CAASF,IAAT,CAA5B;AACA,WAAOC,aAAa,CAACE,kBAAd,CAAiC,OAAjC,CAAP;AACH,GAHD;;AAKA,QAAMC,aAAa,GAAG,YAAY;AAC9B,QAAIT,MAAM,KAAK,MAAf,EAAuB;AACnB,aAAO,MAAMH,QAAQ,CAACa,eAAT,CAAyBC,IAAzB,CAA8B,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACC,SAAF,GAAcF,CAAC,CAACE,SAAxD,CAAb;AACH;;AAAC,QAAId,MAAM,KAAK,UAAf,EAA2B;AACzB,aAAO,MAAMH,QAAQ,CAACa,eAAT,CAAyBC,IAAzB,CAA8B,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACE,QAAF,GAAaH,CAAC,CAACG,QAAvD,CAAb;AACH;;AAAC,QAAIf,MAAM,KAAK,UAAf,EAA2B;AACzB,aAAO,MAAMH,QAAQ,CAACa,eAAT,CAAyBC,IAAzB,CAA8B,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACG,QAAF,GAAaJ,CAAC,CAACI,QAAvD,CAAb;AACH;;AAAC,QAAIhB,MAAM,KAAK,eAAf,EAAgC;AAC9B,aAAO,MAAMH,QAAQ,CAACa,eAAT,CAAyBC,IAAzB,CAA8B,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACjD,YAAII,KAAK,GAAGL,CAAC,CAACM,aAAF,CAAgBC,WAAhB,EAAZ;AACA,YAAIC,KAAK,GAAGP,CAAC,CAACK,aAAF,CAAgBC,WAAhB,EAAZ;AACA,eAAQF,KAAK,GAAGG,KAAT,GAAkB,CAAC,CAAnB,GAAwBH,KAAK,GAAGG,KAAT,GAAkB,CAAlB,GAAsB,CAApD;AACH,OAJY,CAAb;AAKH;;AAAC,QAAIpB,MAAM,KAAK,OAAf,EAAwB;AACtB,aAAO,MAAMH,QAAQ,CAACa,eAAT,CAAyBC,IAAzB,CAA8B,CAACC,CAAD,EAAIC,CAAJ,KAAUQ,UAAU,CAACR,CAAC,CAACS,KAAH,CAAV,GAAsBD,UAAU,CAACT,CAAC,CAACU,KAAH,CAAxE,CAAb;AACH;;AAAC,QAAItB,MAAM,KAAK,OAAf,EAAwB;AACtB,aAAO,MAAMH,QAAQ,CAACa,eAAT,CAAyBC,IAAzB,CAA8B,CAACC,CAAD,EAAIC,CAAJ,KAAUQ,UAAU,CAACR,CAAC,CAACU,KAAH,CAAV,GAAsBF,UAAU,CAACT,CAAC,CAACW,KAAH,CAAxE,CAAb;AACH;AACJ,GAlBD;;AAoBA7B,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAM8B,eAAe,GAAG,YAAY;AAChC,YAAMC,SAAS,GAAG,MAAMhB,aAAa,EAArC;AACA,YAAMiB,iBAAiB,GAAG,MAAMC,OAAO,CAACC,GAAR,CAAYH,SAAS,CAACI,GAAV,CAAc,MAAOC,IAAP,IAAgB;AACtE,YAAI;AAAEf,UAAAA,QAAF;AAAYC,UAAAA,QAAZ;AAAsBE,UAAAA,aAAtB;AAAqCa,UAAAA,eAArC;AAAsDT,UAAAA,KAAtD;AAA6DC,UAAAA,KAA7D;AAAoET,UAAAA;AAApE,YAAkFgB,IAAtF;AACA,cAAME,cAAc,GAAG,MAAMnC,QAAQ,CAACoC,OAAT,CAAiBC,MAAjB,CAAwBC,MAAM,IAAIA,MAAM,CAACC,GAAP,KAAerB,QAAjD,CAA7B;AACA,cAAMsB,cAAc,GAAG,MAAMxC,QAAQ,CAACoC,OAAT,CAAiBC,MAAjB,CAAwBC,MAAM,IAAIA,MAAM,CAACC,GAAP,KAAepB,QAAjD,CAA7B;AACA,cAAMsB,UAAU,GAAG,MAAMlC,WAAW,CAACU,SAAD,CAApC;;AACA,YAAI,CAACyB,KAAK,CAACC,OAAN,CAAcH,cAAd,CAAD,IAAkC,CAACA,cAAc,CAACI,MAAtD,EAA8D;AAC1D,iBACI;AACIC,YAAAA,EAAE,EAAEZ,IAAI,CAACM,GADb;AAEIrB,YAAAA,QAAQ,EAAEiB,cAAc,CAAC,CAAD,CAAd,CAAkBW,UAFhC;AAGI3B,YAAAA,QAAQ,EAAE,YAHd;AAIIE,YAAAA,aAAa,EAAEA,aAJnB;AAKIa,YAAAA,eAAe,EAAEA,eALrB;AAMIT,YAAAA,KAAK,EAAEA,KANX;AAOIC,YAAAA,KAAK,EAAEA,KAPX;AAQIqB,YAAAA,IAAI,EAAE,oBARV;AASI9B,YAAAA,SAAS,EAAEwB;AATf,WADJ;AAaH;;AACD,eACI;AACII,UAAAA,EAAE,EAAEZ,IAAI,CAACM,GADb;AAEIrB,UAAAA,QAAQ,EAAEiB,cAAc,CAAC,CAAD,CAAd,CAAkBW,UAFhC;AAGI3B,UAAAA,QAAQ,EAAEqB,cAAc,CAAC,CAAD,CAAd,CAAkBM,UAHhC;AAIIzB,UAAAA,aAAa,EAAEA,aAJnB;AAKIa,UAAAA,eAAe,EAAEA,eALrB;AAMIT,UAAAA,KAAK,EAAEA,KANX;AAOIC,UAAAA,KAAK,EAAEA,KAPX;AAQIqB,UAAAA,IAAI,EAAE,oBARV;AASI9B,UAAAA,SAAS,EAAEwB;AATf,SADJ;AAaH,OAjC2C,CAAZ,CAAhC;AAkCAvC,MAAAA,iBAAiB,CAAC2B,iBAAD,CAAjB;AACH,KArCD;;AAsCAF,IAAAA,eAAe;AAClB,GAxCQ,EAwCN,CAAC3B,QAAD,CAxCM,CAAT;AA2CA,sBACI,uDACI;AAAO,IAAA,SAAS,EAAC,wBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAJJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALJ,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANJ,CADA,CADJ,eAWI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEIC,cAAc,CAAC+B,GAAf,CAAoBC,IAAD,iBAEX;AAAI,IAAA,GAAG,EAAEA,IAAI,CAACY,EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKZ,IAAI,CAAChB,SAAV,CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKgB,IAAI,CAACf,QAAV,CAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKe,IAAI,CAACd,QAAV,CAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKc,IAAI,CAACZ,aAAV,CAJJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKY,IAAI,CAACR,KAAV,CALJ,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKQ,IAAI,CAACP,KAAV,CANJ,CAFR,CAFJ,CAXJ,CADJ,CADJ;AAgCH,CA1GD;;AA4GA,eAAe3B,oBAAf","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { useGlobalContext} from \"../../context/context\";\n\nconst AllTransactionsTable = () => {\n    const { gameData,  } = useGlobalContext();\n    const [tableDataArray, setTableDataArray] = useState([]);\n    const [sortBy, setSortBy] = useState('typeOfService');\n    const [orderOfSort, setOrderOfSort] = useState('ascending');\n\n    const displayTime = async (time) => {\n        const createdMillis = await new Date(time);\n        return createdMillis.toLocaleTimeString('it-IT');\n    };\n\n    const sortDataArray = async () => {\n        if (sortBy === 'time') {\n            return await gameData.allTransactions.sort((a, b) => b.createdAt - a.createdAt);\n        } if (sortBy === 'consumer') {\n            return await gameData.allTransactions.sort((a, b) => b.consumer - a.consumer);\n        } if (sortBy === 'provider') {\n            return await gameData.allTransactions.sort((a, b) => b.provider - a.provider);\n        } if (sortBy === 'typeOfService') {\n            return await gameData.allTransactions.sort((a, b) => {\n                let textA = a.typeOfService.toUpperCase();\n                let textB = b.typeOfService.toUpperCase();\n                return (textA < textB) ? -1 : (textA > textB) ? 1 : 0;\n            });\n        } if (sortBy === 'price') {\n            return await gameData.allTransactions.sort((a, b) => parseFloat(b.price) - parseFloat(a.price));\n        } if (sortBy === 'txFee') {\n            return await gameData.allTransactions.sort((a, b) => parseFloat(b.txFee) - parseFloat(a.txFee));\n        }\n    };\n\n    useEffect(() => {\n        const renderTableData = async () => {\n            const dataArray = await sortDataArray();\n            const transactionsArray = await Promise.all(dataArray.map(async (item) => {\n                let { consumer, provider, typeOfService, amountOfService, price, txFee, createdAt } = item;\n                const consumerObject = await gameData.players.filter(player => player._id === consumer);\n                const providerObject = await gameData.players.filter(player => player._id === provider);\n                const timeString = await displayTime(createdAt);\n                if (!Array.isArray(providerObject) || !providerObject.length) {\n                    return (\n                        {\n                            id: item._id,\n                            consumer: consumerObject[0].playerName,\n                            provider: \"Blockchain\",\n                            typeOfService: typeOfService,\n                            amountOfService: amountOfService,\n                            price: price,\n                            txFee: txFee,\n                            type: \"cancel transaction\",\n                            createdAt: timeString\n                        }\n                    )\n                }\n                return (\n                    {\n                        id: item._id,\n                        consumer: consumerObject[0].playerName,\n                        provider: providerObject[0].playerName,\n                        typeOfService: typeOfService,\n                        amountOfService: amountOfService,\n                        price: price,\n                        txFee: txFee,\n                        type: \"cancel transaction\",\n                        createdAt: timeString\n                    }\n                )\n            }));\n            setTableDataArray(transactionsArray);\n        };\n        renderTableData();\n    }, [gameData]);\n\n\n    return (\n        <>\n            <table className=\"table-all-transactions\">\n                <thead>\n                <tr>\n                    <th>Time</th>\n                    <th>Consumer</th>\n                    <th>Provider</th>\n                    <th>Type of service</th>\n                    <th>Price/Amount</th>\n                    <th>Tx Fee</th>\n                </tr>\n                </thead>\n                <tbody>\n                {\n                    tableDataArray.map((item) =>\n                        (\n                            <tr key={item.id}>\n                                <td>{item.createdAt}</td>\n                                <td>{item.consumer}</td>\n                                <td>{item.provider}</td>\n                                <td>{item.typeOfService}</td>\n                                <td>{item.price}</td>\n                                <td>{item.txFee}</td>\n                            </tr>\n                        )\n                    )\n                }\n                </tbody>\n            </table>\n        </>\n    )\n};\n\nexport default AllTransactionsTable"]},"metadata":{},"sourceType":"module"}