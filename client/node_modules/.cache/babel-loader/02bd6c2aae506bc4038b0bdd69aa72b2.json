{"ast":null,"code":"var _jsxFileName = \"/home/nejc/LDSE/SharedManufacturing/client/src/components/misc/TransactionsTable.js\";\nimport React, { useState, useEffect } from 'react';\nimport ReactTooltip from 'react-tooltip';\nimport { useGlobalContext } from \"../../context/context\";\nimport { FaTimes } from 'react-icons/fa';\n\nconst TransactionsTable = () => {\n  const {\n    gameData,\n    openConfirmModal,\n    setConfirmModalContent\n  } = useGlobalContext();\n  const [tableDataArray, setTableDataArray] = useState([]);\n\n  const setCancelTransactionModal = transaction => {\n    setConfirmModalContent(transaction);\n    openConfirmModal();\n  };\n\n  useEffect(() => {\n    const renderTableData = async () => {\n      const transactions = await gameData.allPendingTransactions.sort((a, b) => parseInt(b.txFee) - parseInt(a.txFee));\n      const transactionsArray = await Promise.all(transactions.map(async item => {\n        let {\n          consumer,\n          provider,\n          typeOfService,\n          amountOfService,\n          price,\n          txFee\n        } = item;\n        const consumerObject = await gameData.players.filter(player => player._id === consumer);\n        const providerObject = await gameData.players.filter(player => player._id === provider);\n\n        if (!Array.isArray(providerObject) || !providerObject.length) {\n          return {\n            id: item._id,\n            consumer: consumerObject[0].playerName,\n            provider: \"Blockchain\",\n            typeOfService: typeOfService,\n            amountOfService: amountOfService,\n            price: price,\n            txFee: txFee,\n            type: \"cancel transaction\"\n          };\n        }\n\n        return {\n          id: item._id,\n          consumer: consumerObject[0].playerName,\n          provider: providerObject[0].playerName,\n          typeOfService: typeOfService,\n          amountOfService: amountOfService,\n          price: price,\n          txFee: txFee,\n          type: \"cancel transaction\"\n        };\n      }));\n      setTableDataArray(transactionsArray);\n    };\n\n    renderTableData();\n  }, [gameData]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pending-transactions-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-pending-transactions-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table-pending-transactions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    className: \"table-pending-transactions-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 29\n    }\n  }, \"No.\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"table-pending-transactions-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 29\n    }\n  }, \"Pending transactions\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"table-pending-transactions-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 29\n    }\n  }, \"Tx Fee\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 25\n    }\n  }, tableDataArray.map((item, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: item.id,\n    \"data-tip\": true,\n    \"data-for\": item.id,\n    style: {\n      background: `${item.consumer === gameData.player.playerName || item.provider === gameData.player.playerName ? '#fffd6c' : ''}`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 41\n    }\n  }, index + 1)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 37\n    }\n  }, item.consumer, \" \\u21C6 \", item.provider, item.consumer === gameData.player.playerName ? /*#__PURE__*/React.createElement(\"button\", {\n    className: \"cancel-transaction-btn\",\n    onClick: () => {\n      (item.consumer === gameData.player.playerName || item.provider === gameData.player.playerName) && setCancelTransactionModal(item);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(FaTimes, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 49\n    }\n  })) : ''), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 37\n    }\n  }, item.txFee), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"table-pending-transactions-tooltip\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(ReactTooltip, {\n    className: \"table-pending-transactions-head-tooltip-react\",\n    id: item.id,\n    place: \"bottom\",\n    type: \"dark\",\n    effect: \"solid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 49\n    }\n  }, \"Consumer: \", item.consumer), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 49\n    }\n  }, \"Provider: \", item.provider), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 49\n    }\n  }, \"typeOfService: \", item.typeOfService), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 49\n    }\n  }, \"price: \", item.price)))))))))));\n};\n\nexport default TransactionsTable;","map":{"version":3,"sources":["/home/nejc/LDSE/SharedManufacturing/client/src/components/misc/TransactionsTable.js"],"names":["React","useState","useEffect","ReactTooltip","useGlobalContext","FaTimes","TransactionsTable","gameData","openConfirmModal","setConfirmModalContent","tableDataArray","setTableDataArray","setCancelTransactionModal","transaction","renderTableData","transactions","allPendingTransactions","sort","a","b","parseInt","txFee","transactionsArray","Promise","all","map","item","consumer","provider","typeOfService","amountOfService","price","consumerObject","players","filter","player","_id","providerObject","Array","isArray","length","id","playerName","type","index","background"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport ReactTooltip from 'react-tooltip';\nimport { useGlobalContext} from \"../../context/context\";\nimport { FaTimes } from 'react-icons/fa';\n\n\nconst TransactionsTable = () => {\n    const { gameData, openConfirmModal, setConfirmModalContent } = useGlobalContext();\n    const [tableDataArray, setTableDataArray] = useState([]);\n\n    const setCancelTransactionModal = (transaction) => {\n        setConfirmModalContent(transaction);\n        openConfirmModal();\n    };\n\n    useEffect(() => {\n        const renderTableData = async () => {\n            const transactions = await gameData.allPendingTransactions.sort((a, b) => parseInt(b.txFee) - parseInt(a.txFee));\n            const transactionsArray = await Promise.all(transactions.map(async (item) => {\n                let { consumer, provider, typeOfService, amountOfService, price, txFee } = item;\n                const consumerObject = await gameData.players.filter(player => player._id === consumer);\n                const providerObject = await gameData.players.filter(player => player._id === provider);\n                if (!Array.isArray(providerObject) || !providerObject.length) {\n                    return (\n                        {\n                            id: item._id,\n                            consumer: consumerObject[0].playerName,\n                            provider: \"Blockchain\",\n                            typeOfService: typeOfService,\n                            amountOfService: amountOfService,\n                            price: price,\n                            txFee: txFee,\n                            type: \"cancel transaction\"\n                        }\n                    )\n                }\n                return (\n                    {\n                        id: item._id,\n                        consumer: consumerObject[0].playerName,\n                        provider: providerObject[0].playerName,\n                        typeOfService: typeOfService,\n                        amountOfService: amountOfService,\n                        price: price,\n                        txFee: txFee,\n                        type: \"cancel transaction\"\n                    }\n                )\n            }));\n            setTableDataArray(transactionsArray);\n        };\n        renderTableData();\n    }, [gameData]);\n\n\n    return (\n        <>\n            <div className=\"pending-transactions-container\">\n                <div className=\"table-pending-transactions-container\">\n                    <table className=\"table-pending-transactions\">\n                        <thead>\n                        <tr>\n                            <th className=\"table-pending-transactions-head\">No.</th>\n                            <th className=\"table-pending-transactions-head\">Pending transactions</th>\n                            <th className=\"table-pending-transactions-head\">Tx Fee</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        {\n                            tableDataArray.map((item, index) => (\n                                <tr\n                                    key={item.id}\n                                    data-tip data-for={item.id}\n                                    style={{background: `${(item.consumer === gameData.player.playerName) || (item.provider === gameData.player.playerName) ? '#fffd6c' : ''}`}}\n                                >\n                                    <td><strong>{index + 1}</strong></td>\n                                    <td>\n                                        {item.consumer} &#8646; {item.provider}\n                                        {item.consumer === gameData.player.playerName ?\n                                            <button\n                                                className='cancel-transaction-btn'\n                                                onClick={() => { ((item.consumer === gameData.player.playerName) || (item.provider === gameData.player.playerName)) && setCancelTransactionModal(item)}}\n                                            >\n                                                <FaTimes></FaTimes>\n                                            </button>\n                                            :''}\n                                    </td>\n                                    <td>{item.txFee}</td>\n                                    <td className=\"table-pending-transactions-tooltip\">\n                                        <ReactTooltip className=\"table-pending-transactions-head-tooltip-react\" id={item.id} place=\"bottom\" type=\"dark\" effect=\"solid\">\n                                            <ul>\n                                                <li>Consumer: {item.consumer}</li>\n                                                <li>Provider: {item.provider}</li>\n                                                <li>typeOfService: {item.typeOfService}</li>\n                                                <li>price: {item.price}</li>\n                                            </ul>\n                                        </ReactTooltip>\n                                    </td>\n                                </tr>\n                            ))\n                        }\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </>\n    )\n};\n\nexport default TransactionsTable"]},"metadata":{},"sourceType":"module"}