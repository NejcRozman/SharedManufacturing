{"ast":null,"code":"var _jsxFileName = \"/home/nejc/LDSE/SharedManufacturing/client/src/components/misc/AllTransactionsTable.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useGlobalContext } from \"../../context/context\";\n\nconst AllTransactionsTable = () => {\n  const {\n    gameData\n  } = useGlobalContext();\n  const [tableDataArray, setTableDataArray] = useState([]);\n  useEffect(() => {\n    const renderTableData = async () => {\n      const transactions = await gameData.allPendingTransactions.sort((a, b) => parseInt(b.txFee) - parseInt(a.txFee));\n      const transactionsArray = await Promise.all(transactions.map(async item => {\n        let {\n          consumer,\n          provider,\n          typeOfService,\n          amountOfService,\n          price,\n          txFee\n        } = item;\n        const consumerObject = await gameData.players.filter(player => player._id === consumer);\n        const providerObject = await gameData.players.filter(player => player._id === provider);\n\n        if (!Array.isArray(providerObject) || !providerObject.length) {\n          return {\n            id: item._id,\n            consumer: consumerObject[0].playerName,\n            provider: \"Blockchain\",\n            typeOfService: typeOfService,\n            amountOfService: amountOfService,\n            price: price,\n            txFee: txFee,\n            type: \"cancel transaction\"\n          };\n        }\n\n        return {\n          id: item._id,\n          consumer: consumerObject[0].playerName,\n          provider: providerObject[0].playerName,\n          typeOfService: typeOfService,\n          amountOfService: amountOfService,\n          price: price,\n          txFee: txFee,\n          type: \"cancel transaction\"\n        };\n      }));\n      setTableDataArray(transactionsArray);\n    };\n\n    renderTableData();\n  }, [gameData]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table-all-transactions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }\n  }, \"Time.\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, \"Consumer\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  }, \"Provider\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 21\n    }\n  }, \"Type of service\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, \"Price/Amount\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }\n  }, \"Tx Fee\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, tableDataArray.map((item, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: item.id,\n    \"data-tip\": true,\n    \"data-for\": item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 33\n    }\n  }, index + 1)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 29\n    }\n  }, item.consumer, \" \\u21C6 \", item.provider), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 29\n    }\n  }, item.txFee))))));\n};\n\nexport default AllTransactionsTable;","map":{"version":3,"sources":["/home/nejc/LDSE/SharedManufacturing/client/src/components/misc/AllTransactionsTable.js"],"names":["React","useState","useEffect","useGlobalContext","AllTransactionsTable","gameData","tableDataArray","setTableDataArray","renderTableData","transactions","allPendingTransactions","sort","a","b","parseInt","txFee","transactionsArray","Promise","all","map","item","consumer","provider","typeOfService","amountOfService","price","consumerObject","players","filter","player","_id","providerObject","Array","isArray","length","id","playerName","type","index"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { useGlobalContext} from \"../../context/context\";\n\nconst AllTransactionsTable = () => {\n    const { gameData,  } = useGlobalContext();\n    const [tableDataArray, setTableDataArray] = useState([]);\n\n\n    useEffect(() => {\n        const renderTableData = async () => {\n            const transactions = await gameData.allPendingTransactions.sort((a, b) => parseInt(b.txFee) - parseInt(a.txFee));\n            const transactionsArray = await Promise.all(transactions.map(async (item) => {\n                let { consumer, provider, typeOfService, amountOfService, price, txFee } = item;\n                const consumerObject = await gameData.players.filter(player => player._id === consumer);\n                const providerObject = await gameData.players.filter(player => player._id === provider);\n                if (!Array.isArray(providerObject) || !providerObject.length) {\n                    return (\n                        {\n                            id: item._id,\n                            consumer: consumerObject[0].playerName,\n                            provider: \"Blockchain\",\n                            typeOfService: typeOfService,\n                            amountOfService: amountOfService,\n                            price: price,\n                            txFee: txFee,\n                            type: \"cancel transaction\"\n                        }\n                    )\n                }\n                return (\n                    {\n                        id: item._id,\n                        consumer: consumerObject[0].playerName,\n                        provider: providerObject[0].playerName,\n                        typeOfService: typeOfService,\n                        amountOfService: amountOfService,\n                        price: price,\n                        txFee: txFee,\n                        type: \"cancel transaction\"\n                    }\n                )\n            }));\n            setTableDataArray(transactionsArray);\n        };\n        renderTableData();\n    }, [gameData]);\n\n\n    return (\n        <>\n            <table className=\"table-all-transactions\">\n                <thead>\n                <tr>\n                    <th>Time.</th>\n                    <th>Consumer</th>\n                    <th>Provider</th>\n                    <th>Type of service</th>\n                    <th>Price/Amount</th>\n                    <th>Tx Fee</th>\n                </tr>\n                </thead>\n                <tbody>\n                {\n                    tableDataArray.map((item, index) => (\n                        <tr\n                            key={item.id}\n                            data-tip data-for={item.id}\n                        >\n                            <td><strong>{index + 1}</strong></td>\n                            <td>\n                                {item.consumer} &#8646; {item.provider}\n                            </td>\n                            <td>{item.txFee}</td>\n                        </tr>\n                    ))\n                }\n                </tbody>\n            </table>\n        </>\n    )\n};\n\nexport default AllTransactionsTable"]},"metadata":{},"sourceType":"module"}