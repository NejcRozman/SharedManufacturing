{"ast":null,"code":"var _jsxFileName = \"/home/nejc/LDSE/SharedManufacturing/client/src/components/misc/Blockchain.js\";\nimport React, { useState, useEffect } from 'react';\nimport ReactTooltip from 'react-tooltip';\nimport { useGlobalContext } from \"../../context/context\";\nimport PieChart from '../misc/PieChart';\n\nconst Trades = () => {\n  const {\n    gameData\n  } = useGlobalContext();\n  const [chartDataArray, setChartDataArray] = useState([]);\n  const [tableDataArray, setTableDataArray] = useState([]);\n  useEffect(() => {\n    const createDataArray = async () => {\n      const dataArray = await gameData.players.map(item => {\n        return {\n          id: item.playerName,\n          value: parseInt(item.stake)\n        };\n      });\n      setChartDataArray(dataArray);\n    };\n\n    const renderTableData = async () => {\n      const transactions = await gameData.allPendingTransactions.sort((a, b) => parseInt(b.txFee) - parseInt(a.txFee));\n      const transactionsArray = await Promise.all(transactions.map(async item => {\n        let {\n          consumer,\n          provider,\n          typeOfService,\n          amountOfService,\n          price,\n          txFee\n        } = item;\n        const consumerObject = await gameData.players.filter(player => player._id === consumer);\n        const providerObject = await gameData.players.filter(player => player._id === provider);\n        return {\n          id: item._id,\n          consumer: consumerObject[0].playerName,\n          provider: providerObject[0].playerName,\n          typeOfService: typeOfService,\n          amountOfService: amountOfService,\n          price: price,\n          txFee: txFee\n        };\n      }));\n      setTableDataArray(transactionsArray);\n    };\n\n    createDataArray();\n    renderTableData();\n  }, [gameData]);\n  useEffect(() => {}, [gameData]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blockchain-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"piechart-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"piechart-container-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 25\n    }\n  }, \"Blockchain - stake\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"piechart-container-chart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(PieChart, {\n    data: chartDataArray,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"piechart-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-pending-transactions-container-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  }, \"Pending transactions\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-pending-transactions-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table-pending-transactions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    className: \"table-pending-transactions-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 33\n    }\n  }, \"Nr.\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"table-pending-transactions-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 33\n    }\n  }, \"Transaction\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"table-pending-transactions-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 33\n    }\n  }, \"Tx Fee\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 29\n    }\n  }, tableDataArray.map((item, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: item.id,\n    \"data-tip\": true,\n    \"data-for\": item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 49\n    }\n  }, index + 1)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 45\n    }\n  }, item.consumer, \" \\u21C6 \", item.provider), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 45\n    }\n  }, item.txFee), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"table-pending-transactions-tooltip\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(ReactTooltip, {\n    className: \"table-pending-transactions-head-tooltip-react\",\n    id: item.id,\n    place: \"bottom\",\n    type: \"dark\",\n    effect: \"solid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 57\n    }\n  }, \"Consumer: \", item.consumer), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 57\n    }\n  }, \"Provider: \", item.provider), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 57\n    }\n  }, \"typeOfService: \", item.typeOfService), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 57\n    }\n  }, \"amountOfService: \", item.amountOfService), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 57\n    }\n  }, \"price: \", item.price, \"$\"))))))))))));\n};\n\nexport default Trades;","map":{"version":3,"sources":["/home/nejc/LDSE/SharedManufacturing/client/src/components/misc/Blockchain.js"],"names":["React","useState","useEffect","ReactTooltip","useGlobalContext","PieChart","Trades","gameData","chartDataArray","setChartDataArray","tableDataArray","setTableDataArray","createDataArray","dataArray","players","map","item","id","playerName","value","parseInt","stake","renderTableData","transactions","allPendingTransactions","sort","a","b","txFee","transactionsArray","Promise","all","consumer","provider","typeOfService","amountOfService","price","consumerObject","filter","player","_id","providerObject","index"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport ReactTooltip from 'react-tooltip';\nimport { useGlobalContext} from \"../../context/context\";\nimport PieChart from '../misc/PieChart';\n\n\nconst Trades = () => {\n    const { gameData } = useGlobalContext();\n    const [chartDataArray, setChartDataArray] = useState([]);\n    const [tableDataArray, setTableDataArray] = useState([]);\n\n    useEffect(() => {\n        const createDataArray = async () => {\n            const dataArray = await gameData.players.map((item) => {\n                return({\n                    id: item.playerName,\n                    value: parseInt(item.stake)\n                });\n            });\n            setChartDataArray(dataArray);\n        };\n        const renderTableData = async () => {\n            const transactions = await gameData.allPendingTransactions.sort((a, b) => parseInt(b.txFee) - parseInt(a.txFee));\n            const transactionsArray = await Promise.all(transactions.map(async (item) => {\n                let { consumer, provider, typeOfService, amountOfService, price, txFee } = item;\n                const consumerObject = await gameData.players.filter(player => player._id === consumer);\n                const providerObject = await gameData.players.filter(player => player._id === provider);\n                return (\n                    {\n                        id: item._id,\n                        consumer: consumerObject[0].playerName,\n                        provider: providerObject[0].playerName,\n                        typeOfService: typeOfService,\n                        amountOfService: amountOfService,\n                        price: price,\n                        txFee: txFee\n                    }\n                )\n            }));\n            setTableDataArray(transactionsArray);\n        };\n        createDataArray();\n        renderTableData();\n    }, [gameData]);\n\n    useEffect(() => {\n\n    }, [gameData]);\n\n    return (\n        <>\n            <div className=\"blockchain-container\">\n                <div className=\"piechart-container\">\n                    <div className=\"piechart-container-text\">\n                        <h3>Blockchain - stake</h3>\n                    </div>\n                    <div className=\"piechart-container-chart\">\n                        <PieChart data={chartDataArray}/>\n                    </div>\n                </div>\n                <div className=\"piechart-container\">\n                    <div className=\"table-pending-transactions-container-text\">\n                        <h4>Pending transactions</h4>\n                    </div>\n                    <div className=\"table-pending-transactions-container\">\n                        <table className=\"table-pending-transactions\">\n                            <thead>\n                            <tr>\n                                <th className=\"table-pending-transactions-head\">Nr.</th>\n                                <th className=\"table-pending-transactions-head\">Transaction</th>\n                                <th className=\"table-pending-transactions-head\">Tx Fee</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                                {\n                                    tableDataArray.map((item, index) => (\n                                        <tr key={item.id} data-tip data-for={item.id}>\n                                            <td><strong>{index + 1}</strong></td>\n                                            <td>{item.consumer} &#8646; {item.provider}</td>\n                                            <td>{item.txFee}</td>\n                                            <td className=\"table-pending-transactions-tooltip\">\n                                                <ReactTooltip className=\"table-pending-transactions-head-tooltip-react\" id={item.id} place=\"bottom\" type=\"dark\" effect=\"solid\">\n                                                    <ul>\n                                                        <li>Consumer: {item.consumer}</li>\n                                                        <li>Provider: {item.provider}</li>\n                                                        <li>typeOfService: {item.typeOfService}</li>\n                                                        <li>amountOfService: {item.amountOfService}</li>\n                                                        <li>price: {item.price}$</li>\n                                                    </ul>\n                                                </ReactTooltip>\n                                            </td>\n                                        </tr>\n                                    ))\n                                }\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </>\n    )\n};\n\nexport default Trades"]},"metadata":{},"sourceType":"module"}